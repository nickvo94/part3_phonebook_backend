(this.webpackJsonpphonebook=this.webpackJsonpphonebook||[]).push([[0],{14:function(e,n,t){e.exports=t(37)},19:function(e,n,t){},37:function(e,n,t){"use strict";t.r(n);var a=t(0),o=t.n(a),c=t(13),r=t.n(c),l=(t(19),t(2)),u=function(e){var n=e.handleSearch;return o.a.createElement("div",null,"Filter with name: ",o.a.createElement("input",{type:"text",placeholder:"Search..",onChange:n}))},i=function(e){var n=e.formComponents,t={marginLeft:"10px"};return o.a.createElement("form",{onSubmit:n.addName},o.a.createElement("div",null,"name:",o.a.createElement("input",{value:n.newName,style:t,onChange:n.handleNameChange})),o.a.createElement("div",null,"number:",o.a.createElement("input",{value:n.newNumber,style:t,onChange:n.handleNumberChange})),o.a.createElement("div",null,o.a.createElement("button",{type:"submit"},"add")))},s=function(e){var n=e.contacts,t=e.handleDelete;return o.a.createElement("ul",null,n.map((function(e){return o.a.createElement("div",{key:e.name},e.name+" ",e.number+" ",o.a.createElement("button",{id:e.id,onClick:t},"delete"))})))},m=function(e){var n=e.message;return console.log("message...",n),null===n?null:o.a.createElement("div",{className:n.class},n.text)},d=t(3),f=t.n(d),h="/api/persons",g=function(){return f.a.get(h).then((function(e){return e.data}))},v=function(e){return f.a.post(h,e).then((function(e){return e.data}))},b=function(e,n){return f.a.put("".concat(h,"/").concat(e),n).then((function(e){return e.data}))},p=function(e){return f.a.delete("".concat(h,"/").concat(e)).then((function(e){return e}))},E=function(){var e=Object(a.useState)([]),n=Object(l.a)(e,2),t=n[0],c=n[1],r=Object(a.useState)(""),d=Object(l.a)(r,2),f=d[0],h=d[1],E=Object(a.useState)(""),w=Object(l.a)(E,2),N=w[0],C=w[1],j=Object(a.useState)(""),y=Object(l.a)(j,2),O=y[0],k=y[1],x=Object(a.useState)(null),S=Object(l.a)(x,2),D=S[0],L=S[1];Object(a.useEffect)((function(){console.log("effect"),P()}),[]),console.log("render",t.length,"persons");var P=function(){g().then((function(e){c(e)}))},A=function(e){e&&(console.log("handle notification...",e),"error"===e.class?(L(e),P()):"success"===e.class&&L(e),setTimeout((function(){L(null)}),5e3))},B={addName:function(e){if(e.preventDefault(),f){var n=t.find((function(e){return e.name.includes(f)?e:""}));console.log("existed",n);var a={name:f,number:N};if(void 0!==n)window.confirm("".concat(f," is already added to phonebook. Do you want to replace the phone number ?"))&&b(n.id,a).then((function(e){c(t.map((function(t){return t.id===n.id?e:t})))})).catch((function(e){A({class:"error",text:"Person '".concat(a.name,"' is not existed")})}));else v(a).then((function(e){console.log(e),c(t.concat(e)),A({class:"success",text:"Added ".concat(e.name," ")})}));h(""),C("")}},handleNameChange:function(e){console.log("name...",e.target.value),h(e.target.value)},handleNumberChange:function(e){console.log("number...",e.target.value),C(e.target.value)},newName:f,newNumber:N},J=O.length>0?t.filter((function(e){return e.name.toLowerCase().includes(O.toLowerCase())})):t;return o.a.createElement("div",{style:{margin:"10px"}},o.a.createElement("h1",null,"Phonebook"),o.a.createElement(m,{message:D}),o.a.createElement(u,{handleSearch:function(e){console.log("search...",e.target.value),k(e.target.value)}}),o.a.createElement("h2",null,"Add a new contact"),o.a.createElement(i,{formComponents:B}),o.a.createElement("h2",null,"Numbers"),o.a.createElement(s,{contacts:J,handleDelete:function(e){console.log(e.target.id);var n,a=Number(e.target.id),o=t.find((function(e){return e.id===a}));console.log(t,o),o&&(n=window.confirm("Delete ".concat(o.name," ?"))),n&&p(a).then((function(e){if(console.log(e),e){var n=t.filter((function(e){return e.id!==a}));c(n)}})).catch((function(e){A({class:"error",text:"Person '".concat(o.name,"' was already removed from server")})}))}}))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));r.a.render(o.a.createElement(o.a.StrictMode,null,o.a.createElement(E,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[14,1,2]]]);
//# sourceMappingURL=main.acea077b.chunk.js.map